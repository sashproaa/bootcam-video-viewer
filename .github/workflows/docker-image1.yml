name: Docker Image CI

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:


    create-envfile:

      runs-on: ubuntu-latest

      steps:
        - uses: actions/checkout@v2
        - name: GITHUB_WORKSPACE
          run: echo "$GITHUB_WORKSPACE"
        - name: Dump GitHub context
          env:
            GITHUB_WORKSPACE: ${{ github.workspace }}
            GITHUB_CONTEXT: ${{ toJson(github) }}
          run: echo "$GITHUB_CONTEXT"
#          with:
#            repository: sashproaa/bootcam-video-viewer
        - name: Make envfile
          uses: actually-colab/github-action-create-env-file@v2.1
          with:
            INPUT_ENVKEY_DEBUG: True
            INPUT_ENVKEY_SWAGGER: True
            INPUT_ENVKEY_SECRET_KEY: SECRET_KEY
            INPUT_ENVKEY_PUBLIC_KEY: LIQPAY_PUBLIC_KEY
            INPUT_ENVKEY_PRIVATE_KEY: LIQPAY_PRIVATE_KEY
            INPUT_ENVKEY_APPLICATION_CREDENTIALS: GOOGLE_APPLICATION_CREDENTIALS
            INPUT_ENVKEY_HOST_PASSWORD: EMAIL_HOST_PASSWORD
            directory: backend/src
            file_name: .env
#        - name: Make google-json-file
#          uses: actually-colab/github-action-create-env-file@v2.1
#          with:
#            envkey_SECRET_KEY: SECRET_KEY
#            directory: backend/src
#            file_name: google1.json
#
#    build:
#
#      runs-on: ubuntu-latest
#
#      steps:
#      - uses: actions/checkout@v2
#      - name: Build the Docker image
#        run: docker-compose -f docker-compose-prod.yaml up --build -d
